(function(){var e={329:function(e,t,n){"use strict";var r=n(9242),o=n(3396);const a={id:"nav"},s={class:"navbar"},l=(0,o.Uk)("청약달력"),i={class:"navbar"},c=(0,o.Uk)("메일알람신청");function u(e,t,n,r,u,d){const m=(0,o.up)("router-link"),p=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",a,[(0,o._)("div",s,[(0,o.Wm)(m,{to:"/"},{default:(0,o.w5)((()=>[l])),_:1})]),(0,o._)("div",i,[(0,o.Wm)(m,{to:"/mail"},{default:(0,o.w5)((()=>[c])),_:1})])]),(0,o.Wm)(p)])}var d={name:"App",components:{},data(){return{date:new Date}}},m=n(89);const p=(0,m.Z)(d,[["render",u]]);var h=p,f=n(678);const v={class:"wrapper"};function w(e,t,n,r,a,s){const l=(0,o.up)("Calendar");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o.Wm)(l)])}const g={class:"calendarWrapper"};function b(e,t,n,r,a,s){const l=(0,o.up)("FullCalendar"),i=(0,o.up)("eventModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",g,[a.isCalendarViewed?((0,o.wg)(),(0,o.j4)(l,{key:0,ref:"fullCalendar",options:a.calendarOptions},null,8,["options"])):(0,o.kq)("",!0)]),a.isModalViewed?((0,o.wg)(),(0,o.j4)(i,{key:0,onCloseModal:s.closeModal,selected:a.selectedDate},null,8,["onCloseModal","selected"])):(0,o.kq)("",!0)],64)}n(5365);var _=n(9554),y=n(3252),D=n(3836),C=n(7139);const E=e=>((0,o.dD)("data-v-6817be0f"),e=e(),(0,o.Cn)(),e),k={class:"modal"},M=E((()=>(0,o._)("div",{class:"modal__background"},null,-1))),z={class:"modal__content"},N=E((()=>(0,o._)("th",{colspan:"7",style:{"background-color":"#42b983",color:"#fff"}},"기본정보",-1))),F=E((()=>(0,o._)("tr",{class:"item"},[(0,o._)("td",null,"주택구분"),(0,o._)("td",null,"분양/임대"),(0,o._)("td",null,"건설업체"),(0,o._)("td",null,"청약접수시작일"),(0,o._)("td",null,"청약접수종료일"),(0,o._)("td",null,"당첨자발표일"),(0,o._)("td",null,"공급지역")],-1))),S={class:"modal-footer"};function x(e,t,n,a,s,l){return(0,o.wg)(),(0,o.iD)("div",k,[M,(0,o._)("div",z,[(0,o._)("h1",null,(0,C.zw)(n.selected.houseNm),1),(0,o._)("table",null,[N,F,(0,o._)("tr",null,[(0,o._)("td",null,(0,C.zw)(n.selected.houseDtlSecdNm),1),(0,o._)("td",null,(0,C.zw)(n.selected.rentSecdNm),1),(0,o._)("td",null,(0,C.zw)(n.selected.bsnsMbyNm),1),(0,o._)("td",null,(0,C.zw)(n.selected.rceptBgnde),1),(0,o._)("td",null,(0,C.zw)(n.selected.rceptEndde),1),(0,o._)("td",null,(0,C.zw)(n.selected.przwnerPresnatnDe),1),(0,o._)("td",null,(0,C.zw)(n.selected.sido),1)])]),(0,o._)("div",S,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>l.addFavorite&&l.addFavorite(...e)),style:{"background-color":"#42b983",color:"#fff"}},"알람추가"),(0,o._)("button",{onClick:t[1]||(t[1]=(0,r.iM)((t=>e.$emit("close-modal")),["self"]))},"닫기")])])])}var O={name:"eventModal",props:["selected"],data:function(){return{selectedItem:this.selected}},mounted(){},computed:{favorites(){return this.$store.state.getFavorite}},methods:{addFavorite(){this.$store.dispatch("updateFavorite",{data:this.selectedItem}),alert(this.selectedItem.houseNm+"가 알람 리스트에 저장되었습니다."),this.$emit("close-modal")}}};const P=(0,m.Z)(O,[["render",x],["__scopeId","data-v-6817be0f"]]);var $=P,A=n(9749),B=n(1612),I={components:{eventModal:$,FullCalendar:_.ZPm},created(){this.$store.aptList||this.$store.dispatch("getData")},mounted(){},data(){return{calendarOptions:{plugins:[y.ZP,D.ZP],initialView:"dayGridMonth",headerToolbar:{start:"prev",center:"title",end:"next"},locale:"ko",dateClick:this.handleDateClick,events:[],eventClick:this.handleEventClick,customButtons:{prev:{text:"PREV",click:()=>{let e=this.$refs.fullCalendar.getApi();e.prev()}},next:{text:"PREV",click:()=>{let e=this.$refs.fullCalendar.getApi();e.next()}}}},selectedDate:null,isModalViewed:!1,isCalendarViewed:!0}},methods:{getInitalDate:function(){return console.log((0,B.k)(new Date)),(0,B.k)(new Date)},handleDateClick:function(e){console.log(e.dateStr)},handleEventClick:function(e){this.selectedDate=e.event._def.extendedProps,this.openModal()},addNewEvent:function(e){this.calendarOptions.events=[...this.calendarOptions.events,...e]},openModal(){this.isModalViewed=!0,this.isCalendarViewed=!1},closeModal(){this.isModalViewed=!1,this.isCalendarViewed=!0}},computed:(0,A.Se)({aptList:"getResponse"}),watch:{aptList(){const{data:e}=this.aptList,t=[];e.length>0&&(e.forEach((e=>{t.push({title:e.houseNm,start:e.rceptBgnde,end:e.rceptEndde,extendedProps:{...e},color:(0,B.L)(e.sido)})})),this.addNewEvent(t))}}};const Z=(0,m.Z)(I,[["render",b]]);var V=Z,j={name:"Main",components:{Calendar:V},computed:{}};const U=(0,m.Z)(j,[["render",w]]);var L=U;function W(e,t,n,r,a,s){const l=(0,o.up)("MailForm");return(0,o.wg)(),(0,o.j4)(l)}const R=(0,o._)("h1",null,"청약 알람 리스트",-1),T={class:"container",style:{"background-color":"white"}},Y=(0,o._)("h2",null,"알람 신청하기",-1),q={class:"container"};function H(e,t,n,a,s,l){const i=(0,o.up)("mailElement");return(0,o.wg)(),(0,o.iD)(o.HY,null,[R,(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.favorites,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e.houseManageNo},[(0,o.Wm)(i,{favorite:e},null,8,["favorite"])])))),128))]),(0,o._)("div",T,[Y,(0,o.wy)((0,o._)("input",{type:"text",placeholder:"Email address",name:"mail","onUpdate:modelValue":t[0]||(t[0]=t=>e.subscribe=t),required:""},null,512),[[r.nr,e.subscribe]])]),(0,o._)("div",q,[(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>l.setSubscribe&&l.setSubscribe(...e))}," subscribe")])],64)}const J=(0,o._)("th",{colspan:"7",style:{"background-color":"#42b983",color:"#fff"}},"기본정보",-1),G=(0,o._)("tr",{class:"item",style:{"font-weight":"bold"}},[(0,o._)("td",null,"주택구분"),(0,o._)("td",null,"분양/임대"),(0,o._)("td",null,"건설업체"),(0,o._)("td",null,"청약접수시작일"),(0,o._)("td",null,"청약접수종료일"),(0,o._)("td",null,"당첨자발표일"),(0,o._)("td",null,"공급지역")],-1),K={class:"footer"};function Q(e,t,n,r,a,s){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("h3",null,(0,C.zw)(e.element.houseNm),1),(0,o._)("table",null,[J,G,(0,o._)("tr",null,[(0,o._)("td",null,(0,C.zw)(e.element.houseDtlSecdNm),1),(0,o._)("td",null,(0,C.zw)(e.element.rentSecdNm),1),(0,o._)("td",null,(0,C.zw)(e.element.bsnsMbyNm),1),(0,o._)("td",null,(0,C.zw)(e.element.rceptBgnde),1),(0,o._)("td",null,(0,C.zw)(e.element.rceptEndde),1),(0,o._)("td",null,(0,C.zw)(e.element.przwnerPresnatnDe),1),(0,o._)("td",null,(0,C.zw)(e.element.sido),1)])]),(0,o._)("div",K,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>s.removeFavorite&&s.removeFavorite(...e))},"제거")])])}var X={name:"mailElement",props:["favorite"],data:function(){return{element:this.favorite}},methods:{removeFavorite(){this.$store.dispatch("removeFavorite",{data:this.element})}}};const ee=(0,m.Z)(X,[["render",Q]]);var te=ee;const ne=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);var re={data:function(){return{email:"",subscribe:""}},components:{mailElement:te},computed:{count(){return this.$store.state.count},response(){return this.$store.state.response},favorites(){return this.$store.state.favorite}},mounted(){this.subscribe=this.$store.state.subscribe},methods:{setSubscribe(){console.log(),ne(this.subscribe)?(alert(`${this.subscribe}로 청약 알람 메일을 보내드립니다.`),this.$store.dispatch("setSubscribe",{data:this.subscribe})):alert("유효하지 않은 메일 주소입니다.")}}};const oe=(0,m.Z)(re,[["render",H]]);var ae=oe,se={name:"Sub",components:{MailForm:ae}};const le=(0,m.Z)(se,[["render",W]]);var ie=le;const ce=[{path:"/",component:L},{path:"/mail",component:ie}],ue=(0,f.p7)({history:(0,f.PO)(),routes:ce});var de=ue,me=n(6265),pe=n.n(me);const he=window.localStorage;let fe=[],ve="";(function(){he.getItem("Events")&&(fe=JSON.parse(he.getItem("Events"))),he.getItem("Email")&&(ve=JSON.parse(he.getItem("Email")))})();let we=function(e,t){he.setItem(e,JSON.stringify(t))};const ge=async function(e){let t=await pe().post("https://www.myhomealarm.xyz/user/getUserByMail",{mail:e.data});if(console.log(t),t.data.res.length>0){const e=t.data.res[0];return e}return t=await ye(e),console.log("create user!"),1===t.data.rowCount&&(t=await pe().post("https://www.myhomealarm.xyz/user/getUserByMail",{mail:e.data}),console.log("load user again")),t},be=(e,t)=>{let n=[];return e.map((e=>{const{houseManageNo:r,pblancNo:o,houseDetailSecdNm:a,houseNm:s,bsnsMbyNm:l,rcritPblancDe:i,rceptBgnde:c,rceptEndde:u,przwnerPresnatnDe:d}=e[0];n.push({houseManageNo:r,pblancNo:o,houseDetailSecdNm:a,houseNm:s,bsnsMbyNm:l,rcritPblancDe:i,rceptBgnde:c,rceptEndde:u,przwnerPresnatnDe:d,home_info_id:t})})),n},_e=async function(e,t){const n=await pe().post("https://www.myhomealarm.xyz/schedule/getUserById",{id:e}),{res:r}=n.data;console.log(t);let o=[];if(0===r.length){o=be(t,e);const n=await pe().post("https://www.myhomealarm.xyz/schedule/applyArr",{arr:o}),{data:r}=n;alert(r.message)}else{console.log("already saved one..."),console.log(e);const n=await pe()["delete"]("https://www.myhomealarm.xyz/schedule/applyById",{data:{id:e}});console.log(n),o=be(t,e);const r=await pe().post("https://www.myhomealarm.xyz/schedule/applyArr",{arr:o}),{data:a}=r;alert(a.message)}},ye=async function(e){const t=await pe().post("https://www.myhomealarm.xyz/user/createUser",{mail:e.data});return t},De=new A.ZP.Store({state:{count:0,response:[],category:"APT",favorite:fe,subscribe:ve},getters:{increaseCount(e){return++e.count},getResponse(e){return e.response},getCategory(e){return e.category},getFavorite(e){return e.favorite},getSubscribe(e){return e.subscribe},getEmail(e){return e.email}},mutations:{addcounter:function(e,t){return e.count+=t.amount},updateState:function(e,t){return e.response=t.response},updateCategory:function(e,t){return e.category=t.category},updateFavorite:function(e,t){const n=e.favorite.some((e=>e.houseManageNo===t.data.houseManageNo));if(!n)return e.favorite.push(t.data),we("Events",e.favorite),e.favorite},removeFavorite:function(e,t){return e.favorite=e.favorite.filter((e=>e.houseManageNo!==t.data.houseManageNo)),we("Events",e.favorite),e.favorite},setSubscribe:function(e,t){return e.subscribe=t.data,we("Email",e.subscribe),e.subscribe},checkUser:function(e){console.log(e)}},actions:{getData({commit:e}){return console.log(this.state.category),pe().get(`https://www.myhomealarm.xyz/getInfo?category=${this.state.category}`).then((t=>{const{data:n}=t;e({type:"updateState",response:n})})).catch((e=>{console.error("Front End Part",e)}))},updateFavorite({commit:e},t){e("updateFavorite",t)},removeFavorite({commit:e},t){e("removeFavorite",t)},async setSubscribe({commit:e},t){console.log(t);const n=await ge(t);if(console.log(n),void 0!==n){const e=[];1===this.state.favorite.length?e.push(this.state.favorite):this.state.favorite.length>=1&&this.state.favorite.forEach((t=>{e.push(t)})),_e(n.id,e)}e("setSubscribe",t)}}});var Ce=De;const Ee=(0,r.ri)(h);Ee.use(de),Ee.use(Ce),Ee.mount("#app")},1612:function(e,t){function n(e){return e>=10?e:`0${e}`}t.L=function(e){switch(e){case"서울":return"#27AE60";case"경기":return"#27AE60";case"인천":return"#27AE60";case"강원":return"#7DCEA0";case"광주":return"#A9DFBF";case"전남":return"#A9DFBF";case"전북":return"#A9DFBF";case"대전":return"#6495ED";case"충남":return"#6495ED";case"충북":return"#6495ED";case"세종":return"#6495ED";case"경남":return"#76D7C4";case"부산":return"#76D7C4";case"대구":return"#76D7C4";case"경북":return"#76D7C4";case"울산":return"#76D7C4";case"기타":return"#40E0D0";case"제주":return"#40E0D0"}},t.k=function(e,t="-"){const r=e.getFullYear(),o=n(e.getMonth()+1),a=n(e.getDate());return[r,o,a].join(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],a=e[u][2];for(var l=!0,i=0;i<r.length;i++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,s=r[0],l=r[1],i=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(i)var u=i(n)}for(t&&t(r);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},r=self["webpackChunkhome_apply"]=self["webpackChunkhome_apply"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(329)}));r=n.O(r)})();
//# sourceMappingURL=app.fb697624.js.map